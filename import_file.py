import os
import django

# Configure Django settings
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'base.settings')
django.setup()

from filters.models import Filter
from interests.models import Interest

def import_filter():
    
    json_data = [{"id": 1, "name": "$$$$$ Elite Class", "interests": "1,21,29,31,41,43,47,48,49,158,162,163,165,167,173,182,187,194,230,233,3020"}, {"id": 2, "name": "$$$$ Emotional Engagement", "interests": "2939,23,216,760,272,161,153,762,2913,2938,148,149,2604,146,2957,2881,168,197,289,208,2911,3014,2948,142,2652,2706,263,279,232,275,145,2707,274,2946,2708,283,2705,2655,2949,2704,231,2703,2945,154,3002,2918,278,22,2702,2700,2994,160,2696,143,2693,2699,169,2692,280,2940,258,267,2684,2934,2944,2573,3026,754,3022,2685,150,2642,2953,2679,285,764,2656,2769,291,292,2929,2623,2991,236,2971,2695,2653,3025,2694,248,147,2774,152,2622,2688,2990,151,209,183,2998,2970,2681,2968,2950,2969,2570,2920,186,184,2989,2967,164,2964,2589,172,370,2962,14,3000,8,166,2664,176,251,170,2999,144,196,2588,2666,2568,2554,174,185,157,2667,155,2965,159,180,2963,177,2883,175,2961,179,3031,2960,2569,178,195,2682,2958,2937,2638,2771,181,2768,2882,2995,2880,2879,2,2901,2633,199,2935,2912,30,2933,2932,2914,2729,2931,2629,2628,229,763,2632,2930,210,2727,2726,2936,2928,293,2597,171,193,2575,2873,2926,214,2927,2728,266,270,3045,3042,3040,3041"}, {"id": 3, "name": "$$$ Sensible Equilibrium", "interests": "2608,2721,3005,750,273,202,2780,2607,2716,2606,2830,246,2979,2724,747,759,276,2603,215,2711,2675,346,2601,352,254,2712,2924,2600,2673,356,2923,359,2713,3006,2956,2596,363,2709,371,2595,387,343,288,2594,2592,2947,2591,384,3039,2917,385,3012,2586,247,353,3011,282,2955,2657,2921,281,2701,2583,2775,374,2581,2878,3061,2580,2737,269,2658,2650,2982,2993,2875,2579,2954,3004,2690,2578,2777,378,2577,2585,751,2734,350,2871,2698,3035,379,2904,2697,382,383,2973,341,377,380,3060,375,2617,2614,342,369,2992,2626,3023,2731,2922,365,367,366,3059,2634,253,344,3030,2559,358,2687,364,345,2678,2903,2996,2919,2869,286,357,2842,2972,746,2676,2672,2951,3057,2671,3021,749,2669,2662,2943,2654,2665,2843,2838,2651,761,2689,3001,2847,2646,2835,2832,351,2660,2613,349,2659,2952,2831,2557,2661,2683,2616,2977,2906,348,347,2615,24,355,2590,2680,2710,3019,2556,2868,360,362,354,2787,368,361,3024,2839,2783,2621,376,372,381,2782,2620,373,2779,2784,386,2866,2619,2925,755,2571,2941,3056,3018,3010,2846,2829,2648,2553,2778,13,3015,264,2610,3013,2828,2605,2773,2552,2966,2867,2776,2640,252,2845,2872,3017,2781,2844,3029,2841,3055,2551,287,2740,748,250,2840,2548,2639,3034,249,2558,3031,2741,2565,3036,2976,3007,2691,2772,2738,2785,3016,2686,2668,2637,2647,3009,237,2636,2834,2983,2635,2833,2735,2722,2670,2643,2631,2732,2645,260,2649,2663,2733,2720,2715,200,2641,2677,2587,2602,2736,2624,277,2910,2719,2725,2909,2730,2717,2987,2584,2907,2997,2582,2723,2905,2877,2674,3033,2599,2567,290,2959,2598,2870,2902,2564,752,259,2576,2900,2563,2974,2612,3003,2915,2714,2874,2786,265,2561,2609,2574,2560,3037,25,2593,268,2718,3008,2876,2739,2572,2550,2986,756,2942,2978,2627,2644,2630,2618,2611,757,2908,2549,758,271,3049,3051,3050,3048,3046,3047,3044,3043,2837,2836,2985,2984,2975,2980,2981,262,257,3063,7,3058,3038,3054,3052,3053,3062"}, {"id": 4, "name": "$$ Competitive Eats", "interests": "12,198,255,256,284,2742,2988,3027,3032"}, {"id": 5, "name": "$ Budget Friendly", "interests": ""}]
	
    for row in json_data:
        name = row['name']
        interest_ids = [int(id.strip()) for id in row['interests'].split(',') if id.strip()]

        # Create or get the Filter object
        filter_obj, _ = Filter.objects.get_or_create(types="SP3", name=name)

        # Get or create Interest objects and add them to the Filter object
        if filter_obj.types == "WORLD" or filter_obj.types == "RATING":
            order = row['order']
            filter_obj.order = order
            filter_obj.save()
        interests = Interest.objects.filter(id__in=interest_ids)
        filter_obj.interests.add(*interests)

if __name__ == '__main__':
    import_filter()